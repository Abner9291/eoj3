{% extends 'base.jinja2' %}
{% from 'components/username_display.jinja2' import username_display with context %}

{% block title %}Submission #{{ submission.id }} - {% endblock %}

{% block page_header %}Submission #{{ submission.id }}{% endblock %}

{% block content %}

  {{ submission_block }}

  <div class="ui segment">
    <div class="ui simple dropdown top right attached label">
      <i class="code icon"></i> {{ submission.get_lang_display() }}
      <div class="menu">
        <a class="item clipboard" data-clipboard-text="{{ submission.code }}"><i class="copy icon"></i> Copy</a>
      {% if not submission.contest %}
        <a class="item" href="{{ url('problem:submit', submission.problem_id) }}?submission={{ submission.pk }}">
          <i class="external icon"></i> Open in editor
        </a>
      {% endif %}
      </div>
    </div>
    <div>{{ submission.code_as_html | safe }}</div>
  </div>

  {% if submission.author == request.user %}
    {% if contest %}
      <div id="past-submissions" data-url="{{ url('contest:past_submission', contest.id) }}"></div>
    {% else %}
      <div id="past-submissions" data-url="{{ url('problem:past_submission', problem.id) }}"></div>
    {% endif %}
  {% endif %}
  
{% endblock %}
